function initGMap(mapId,lat,long,streetViewControl,maker,zoom){void 0===mapId&&(mapId="map"),void 0===streetViewControl&&(streetViewControl=!0),void 0===maker&&(maker=!0),void 0===zoom&&(zoom=15),latitude=lat,longitude=long,point=new google.maps.LatLng(latitude,longitude),mapId=document.getElementById(mapId);var mapTypeId=mapId.dataset.tilt?google.maps.MapTypeId.SATELLITE:google.maps.MapTypeId.ROADMAP,mapTilt=mapId.dataset.tilt?parseInt(mapId.dataset.tilt):0;mapId.dataset.tilt&&(zoom=14),console.log(latitude,longitude,mapTypeId,mapTilt);var mapOptions={center:new google.maps.LatLng(latitude,longitude),zoom:zoom,mapTypeId:mapTypeId,tilt:mapTilt,panControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},mapTypeControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_BOTTOM},mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM},streetViewControl:streetViewControl};map=new google.maps.Map(mapId,mapOptions),map.objectDiv=mapId;var image=new google.maps.MarkerImage("/img/gjmaps.png");if(maker){new google.maps.Marker({position:point,map:map,animation:google.maps.Animation.DROP,icon:image})}var bni_style=[{featureType:"road.arterial",stylers:[{hue:"#a99959"},{visibility:"on"},{saturation:0}]},{featureType:"landscape.man_made",stylers:[{visibility:"on"},{hue:"#342F1F"},{saturation:40}]},{stylers:[{visibility:"on"},{hue:"#a99959"},{saturation:-65},{lightness:-7}]}];map.setOptions({styles:bni_style}),google.maps.event.addListener(map,"idle",function(){gmapShowMarkers(map)}),google.maps.event.addListenerOnce(map,"idle",function(){var map_gradient=document.createElement("div");map_gradient.setAttribute("id","map-gradient"),jQuery("#map div").first().append(map_gradient),jQuery(".gmnoprint").css("z-index","92")})}function gmapShowMarkers(map){var bounds=map.getBounds(),ne=bounds.getNorthEast(),sw=bounds.getSouthWest();_xhr&&_xhr.abort(),_xhr=jQuery.ajax({type:"post",url:ajaxData.ajaxurl,data:{action:ajaxData.action||"get_gmap_markers",ne:[ne.lat(),ne.lng()],sw:[sw.lat(),sw.lng()],nonce:ajaxData.nonce,category:ajaxData.category,type:map.objectDiv.dataset.type||ajaxData.type,data:ajaxData.data,letter:ajaxData.letter,development:ajaxData.development||""},error:function(xhr,error){console.log(xhr,error)},success:function(response){var $spinner=jQuery("#spinner");$spinner.length>0&&$spinner.removeClass("visible");var existings=[];for(i=0;i<_markers.length;i++)_markers[i].remove=1,existings.push(_markers[i]._details.postID);try{for(json=jQuery.parseJSON(response),console.log(json.length),i=0;i<json.length;i++){var marker,point=json[i],id=existings.indexOf(point.id);if(0>id){var image=new google.maps.MarkerImage(point.icon);marker=new google.maps.Marker({position:new google.maps.LatLng(point.lat,point.lng),map:map,animation:google.maps.Animation.DROP,optimized:!1,icon:image}),marker._details={postID:point.id,title:point.title,thumbnail:point.image,content:point.content};var content="";""===point.video||void 0===point.video?(content+='<img src="'+point.image+'" />',content+="<br />",content+="<span>"+point.title+"</span><br />",content+='<a class="map-title" href="'+point.link+'">Read More</a>',content+='<span class="map-category">'+point.category+"</span>"):content+='<iframe title="YouTube video player" class="youtube-player" type="text/html" width="480" height="390" src="'+point.video+'" frameborder="0"></iframe>';var infowindow=new google.maps.InfoWindow({content:content});marker._infoWindow=infowindow,marker.somethingIwant=point,_markers.push(marker),google.maps.event.addListener(marker,"click",function(){this._infoWindow.open(map,this)})}else marker=_markers[id],marker.remove=0}}catch(err){}for(i=_markers.length-1;i>=0;i--)1==_markers[i].remove&&(_markers[i].setMap(null),_markers.splice(i,1))}})}function showMarkerDetails(marker,show){void 0===show&&(show=!0),$marker=jQuery("#markerDetails"),$marker.find("#content .title p").html(marker._details.title),$marker.find("#content p.text").html(marker._details.content),$marker.find(".photo img").attr("src",marker._details.thumbnail),$marker.css({opacity:0}).show(),$marker.find("#content").css({height:$marker.height()-20}),$marker.find(".photo").css({maxHeight:$marker.height()-20}),show&&$marker.show()}var _xhr,_markers=new Array,map,json;jQuery(window).resize(function(){setTimeout(function(){$marker=jQuery(".marker-details"),$marker.hasClass("zactive")&&_centerDiv($marker)},300)});