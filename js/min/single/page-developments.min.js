var $e;
jQuery(document).ready(function() {
    ! function(e) {
        "use strict";

        function t(e) {
            o && (e = e || "", e = e.replace("&", "&amp;"), _coverflows.forEach(function(t) {
                jQuery("#" + t.dest).fadeOut("fast", function() {
                    jQuery(this).html(""), a(t, e)
                })
            }), o = !1)
        }

        function a(e, t) {
            var i = document.getElementById(e.dest),
                a = document.createElement("ul"),
                o = document.createElement("ul"),
                s = !0;               ;
            a.id = e.id, a.classList.add("coverflow-me"), a.style.display = "none", a.dataset.dest = e.dest, o.dataset.cat = "+ Category one", a.appendChild(o), e.data.forEach(function(e) {
                if ("" === t || e.category == t) {
                    var i = document.createElement("ul"),
                        a = '<li data-type="link" data-url="' + e.link + '"></li><li data-thumbnail-path="' + e.img + '"></li><li data-thumbnail-text=""><div class="flowWrapper" style="float: left; width: 100%; height: auto; padding-top: 5px"><p class="largeLabel"><a href="' + e.link + '">' + e.title + e.price + '</a><span class="category">' + e.category + "</span><span>" + e.intro_text + '</span></p><p class="smallLabel">Price Â£' + e.price + '</p><p class="smallLabel">' + e.sqft + ' sqft</p><p class="smallLabel">Bedrooms ' + e.bedrooms + '</p><ul class="options" style="display: none"><li></li></ul></p></div></li>';
                    i.innerHTML = a, o.appendChild(i), s = !1
                }
            }), i.appendChild(a), s || (generateCoverflow(), jQuery("#" + e.dest).show())
        }
        var o = !1;
        e(".change-view li, .show-latest").click(function() {
            e("#back-button").show();
            var i = e(this).data("id"),
                a = e(i);
            e("#change-view li").removeClass("active"), e(this).addClass("active"), e("#myDiv-fluidwidth").hide(), e("#myVideo-fluidwidth").hide(), e(this).closest(".parallax").find(".switch-me").hide(), a.show(), a.data("map") && !a.data("initialized") && (e("#back-button").hide(), initGMap(a.data("dest") || "mapview", a.data("lat"), a.data("lon"), !0, !1, 14), a.data("initialized", 1));
            var s = 1 === e(this).data("nofilter");
            s ? e("#filter-view").fadeOut() : e("#filter-view").fadeIn(), "videos" == e(this).closest(".parallax").attr("id") && (1 == e(this).data("info") ? e("#developments-categories .info").slideDown("fast") : e("#developments-categories .info").slideUp("fast")), i.indexOf("#coverflow") >= 0 && (o = !0, t(ajaxData.development || "")), i.indexOf("#bg") >= 0 && e("#navigation-menu .second a.active").trigger("click"), "#devgrid" == i && h("fast")
        }), e("#filter-view ul a, #navigation-menu .second a, #responsive-dev-menu a").click(function() {
            e("#filter-view ul li").removeClass("active"), e(this).parent().addClass("active");
            var i = e(this).data("category") || e(this).data("href");
            e("#strips").is(":visible") && e("#devview .the-strips li").each(function() {
                var t = e(this),
                    a = t.data("height"),
                    o = 1;
                t.data("height") || (a = t.outerHeight(), a > 1 && t.data("height", a)), i && "" !== i && t.data("category") != i.toLowerCase() ? (a = 0, o = 0) : t.show(), t.stop(!0, !1).animate({
                    height: a,
                    opacity: o
                }, "slow", function() {
                    t.height() <= 1 && t.hide()
                })
            }), i ? (e("#devview #grid li").addClass("hide-me"), e('#devview #grid li[data-category="' + i + '"]').removeClass("hide-me"), e('#devview #grid li[data-category="' + i.toLowerCase() + '"]').removeClass("hide-me")) : e("#devview #grid li").removeClass("hide-me"), e("#devview .responsive-grid").trigger("reflow"), ajaxData.development = i, e("#mapview").is(":visible") && gmapShowMarkers(map), o = e("#coverflow").is(":visible"), t(i)
        }), e(document).on("mouseenter", ".the-strips li", function() {
            e("#bg img").removeClass("active"), e("#bg ." + e(this).data("image")).addClass("active")
        }), e(".toggle-radio").click(function() {
            if (i && (e(".the-content").data("original-height", e(".the-content").height()), i = !1), e(".radio-would").is(":visible")) e(this).text("Show More"), e(".the-content").height(e(".the-content").data("original-height")), e(".radio-would").slideToggle(400);
            else {
                e(this).text("Show Less"), e(".radio-would").slideToggle(400);
                var t = window.innerHeight - e("#register").position().top - e("#footer").outerHeight() - e("#register .view-other").outerHeight() - 65 - e(".view-other").outerHeight(),
                    a = setInterval(function() {
                        var i = e(".the-content").data("height") + e(".radio-would").height() + 5;
                        i > t && (i = t), e(".the-content").height(i)
                    }, 50)
            }
            e(".radio-would").promise().done(function() {
                clearInterval(a), setTimeout(function() {
                    e(".the-content").data("height", e(".the-content").height()), e("#register .the-content").hasClass("ps-container") ? e("#register .the-content").perfectScrollbar("update") : e("#register .the-content").perfectScrollbar()
                }, 500)
            })
        });
        var s = function(t, i, a) {
                if (!e(t).hasClass("visible")) {
                    var o = e(window).scrollTop() + a.scrollTop(),
                        s = e("body").height(),
                        n = getMatrixM41(t.get(0)),
                        r = n <= o + s - a.outerHeight() / 3.5;
                    if (r) {
                        var d = e(t).find("img");
                        d.attr("src", d.data("src")), e(t).addClass("visible"), e(t).delay(50 * i).animate({
                            opacity: 1
                        }, "slow")
                    }
                }
            },
            n = 300,
            r = 450,
            d = 1.5,
            l = (e(".responsive-grid"), function(t) {
                return e("#grid").width() / t
            }),
            h = function(t) {
                var i = Math.round(window.innerWidth / r),
                    a = l(i);
                t = t || 400, n > a && i > 1 && (i--, a = l(i));
                var o = a / d,
                    h = {
                        x: 0,
                        y: 0
                    },
                    c = 0;
                e(".responsive-grid .item").each(function(n) {
                    var r = e(this);
                    if (r.hasClass("clone")) {
                        $original = r.data("original");
                        var d = $original.attr("style"),
                            l = /rotateX[^;]*/;
                        d = d.replace(l, ""), r.attr("style", d).show();
                        var v = r.find(".back .data");
                        return void v.css({
                            marginTop: (r.find(".back").outerHeight() - v.outerHeight()) / 2
                        })
                    }
                    return r.hasClass("hide-me") ? void r.stop(!0, !1).delay(50 * c).transition({
                        scale: 0,
                        opacity: 0
                    }) : (c > 0 && c % i === 0 && (h.x = 0, h.y += o), this.dataset.positionX = h.x, this.dataset.positionY = h.y, r.transition({
                        x: h.x,
                        y: h.y,
                        width: a,
                        height: o,
                        scale: 1,
                        opacity: 1
                    }, t, function() {
                        s(this, e(this).index(), e(this).closest(".responsive-grid"))
                    }), h.x += a, void c++)
                }), e(".show-more").transition({
                    x: "-50%",
                    y: h.y + o + 50
                }, t)
            }
    }(jQuery)
});