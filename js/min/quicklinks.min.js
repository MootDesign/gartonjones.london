!function(i){var t=300,a=450,o=1.5,r=(i("#grid"),function(t){return i("#grid").width()/t}),n=function(n){var e=Math.round(window.innerWidth/a),d=r(e);n=n||400,t>d&&e>1&&(e--,d=r(e));var h=d/o,l={x:0,y:0},c=0;i("#grid .item").each(function(t){var a=i(this);if(a.hasClass("clone")){$original=a.data("original");var o=$original.attr("style"),r=/rotateX[^;]*/;o=o.replace(r,""),a.attr("style",o).show();var g=a.find(".back .data");return void g.css({marginTop:(a.find(".back").outerHeight()-g.outerHeight())/2})}return a.hasClass("hide-me")?void a.stop(!0,!1).delay(50*c).transition({opacity:0}):(c>0&&c%e===0&&(l.x=0,l.y+=h),this.dataset.positionX=l.x,this.dataset.positionY=l.y,a.transition({width:d,height:h,opacity:1},n,function(){s(this,i(this).index(),i(this).closest("#grid"))}),l.x+=d,void c++)})},s=function(t,a,o){if(!i(t).hasClass("visible")){var r=i(window).scrollTop()+o.scrollTop(),n=i("body").height(),s=getMatrixM41(t.get(0)),e=s<=r+n-o.outerHeight()/3.5;if(e){var d=i(t).find("img");d.attr("src",d.data("src")),i(t).addClass("visible"),i(t).delay(50*a).animate({opacity:1},"slow")}}};i(window).load(function(){n()})}(jQuery);