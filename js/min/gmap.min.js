function initGMap(e,a,t,o,i,n){void 0===e&&(e="map"),void 0===o&&(o=!0),void 0===i&&(i=!0),void 0===n&&(n=15),latitude=a,longitude=t,point=new google.maps.LatLng(latitude,longitude),e=document.getElementById(e);var r=e.dataset.tilt?google.maps.MapTypeId.SATELLITE:google.maps.MapTypeId.ROADMAP,s=e.dataset.tilt?parseInt(e.dataset.tilt):0;e.dataset.tilt&&(n=14);var l={center:new google.maps.LatLng(latitude,longitude),zoom:n,mapTypeId:r,tilt:s,panControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.LEFT_BOTTOM}};map=new google.maps.Map(e,l),map.objectDiv=e;var p=new google.maps.MarkerImage("/wp-content/themes/new_theme/img/gj-marker-double.png");if(i){new google.maps.Marker({position:point,map:map,animation:google.maps.Animation.DROP,icon:p})}map.setCenter(point),google.maps.event.addListener(map,"idle",function(){gmapShowMarkers(map)}),google.maps.event.addListenerOnce(map,"idle",function(){var e=document.createElement("div");e.setAttribute("id","map-gradient"),jQuery("#map div").first().append(e),jQuery(".gmnoprint").css("z-index","92")})}function gmapShowMarkers(e){var a=e.getBounds(),t=a.getNorthEast(),o=a.getSouthWest();_xhr&&_xhr.abort(),_xhr=jQuery.ajax({type:"post",url:ajaxData.ajaxurl,data:{action:ajaxData.action||"get_gmap_markers",ne:[t.lat(),t.lng()],sw:[o.lat(),o.lng()],nonce:ajaxData.nonce,category:ajaxData.category,type:e.objectDiv.dataset.type||ajaxData.type,data:ajaxData.data,letter:ajaxData.letter,development:ajaxData.development||""},error:function(e,a){console.log(e,a)},success:function(a){var n=jQuery("#spinner");n.length>0&&n.removeClass("visible"),console.log(t,o,a);var r=[];for(i=0;i<_markers.length;i++)_markers[i].remove=1,r.push(_markers[i]._details.postID);try{for(json=jQuery.parseJSON(a),i=0;i<json.length;i++){var s,l=json[i],p=r.indexOf(l.id);if(0>p){var m=new google.maps.MarkerImage(l.icon);s=new google.maps.Marker({position:new google.maps.LatLng(l.lat,l.lng),map:e,animation:google.maps.Animation.DROP,optimized:!1,icon:m}),s._details={postID:l.id,title:l.title,thumbnail:l.image,content:l.content};var g="";""===l.video||void 0===l.video?(g+='<img src="'+l.image+'" />',g+="<br />",""!=l.link&&(g+='<a class="point-link" href="'+l.link+'" target="_blank">'),g+="<span>"+l.title+"</span>",""!=l.link&&(g+="</a>"),g+="<br />",l.price&&(console.log(l.price),parseInt(l.price)<8e4&&(l.price+=" Per Week"),g+="<span>Â£"+l.price+"</span><br />"),""!=l.sales_link&&l.sales_link&&(g+='<br><a target="_blank" class="map-title point-link" href="'+l.sales_link+'">View all Sales Properties</a>'),""!=l.lettings_link&&l.sales_link&&(g+='<br><a target="_blank" class="map-title point-link" href="'+l.lettings_link+'">View All Rental Properties</a>'),l.category&&(g+='<br><span class="map-category">'+l.category+"</span>")):g+='<iframe title="YouTube video player" class="youtube-player" type="text/html" width="480" height="390" src="'+l.video+'" frameborder="0"></iframe>';var d=new google.maps.InfoWindow({content:g});s._infoWindow=d,s.somethingIwant=l,_markers.push(s),google.maps.event.addListener(s,"click",function(){this._infoWindow.open(e,this)})}else s=_markers[p],s.remove=0}}catch(c){}for(i=_markers.length-1;i>=0;i--)1==_markers[i].remove&&(_markers[i].setMap(null),_markers.splice(i,1))}})}function showMarkerDetails(e,a){void 0===a&&(a=!0),$marker=jQuery("#markerDetails"),$marker.find("#content .title p").html(e._details.title),$marker.find("#content p.text").html(e._details.content),$marker.find(".photo img").attr("src",e._details.thumbnail),$marker.css({opacity:0}).show(),$marker.find("#content").css({height:$marker.height()-20}),$marker.find(".photo").css({maxHeight:$marker.height()-20}),a&&$marker.show()}var _xhr,_markers=new Array,map,json;jQuery(window).resize(function(){setTimeout(function(){$marker=jQuery(".marker-details"),$marker.hasClass("zactive")&&_centerDiv($marker)},300)});